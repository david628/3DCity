{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","views/LoginPage/index.js","utils/history.js","utils/Ajax.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","LoginPage","connect","state","login","dispatch","bindActionCreators","param","Ajax","method","body","JSON","stringify","then","rs","code","localStorage","setItem","data","token","type","user","history","push","Message","warning","msg","props","handleChange","e","preventDefault","setState","target","name","handleSubmit","userName","password","className","onSubmit","this","submit","style","padding","onChange","placeholder","Component","createHistory","require","createHashHistory","url","option","fetch","cache","headers","getItem","response","json","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"static/js/8.1b046bda.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux';\r\nimport { Form, Button, Input, Message } from '../../dw-rui';\r\nimport history from '../../utils/history';\r\nimport Ajax from '../../utils/Ajax';\r\nimport './index.less';\r\n\r\n@connect(\r\n    state => state.login,\r\n    dispatch => bindActionCreators({\r\n        login: param => {\r\n            return dispatch => {\r\n                // // Ajax(`data/login.json`, {\r\n                // //     method: 'POST',\r\n                // //     body: JSON.stringify(param)\r\n                // // }).then(rs => {\r\n                        \r\n                // //     if(rs.code === 0) {\r\n                //         const rs = {\r\n                //             data: {\r\n                //                 userName: 'admin',\r\n                //                 password: 'admin'\r\n                //             },\r\n                //             token: 'sdfertertdfgdfgdf'\r\n                //         };\r\n                //         localStorage.setItem('user', JSON.stringify(rs.data));\r\n                //         localStorage.setItem('token', rs.token);\r\n                //         dispatch({\r\n                //             type: \"login\",\r\n                //             user: rs.data\r\n                //         });\r\n                //         history.push('/');\r\n                // //     } else {\r\n                // //         // Message.warning({\r\n                // //         //     msg: <div>用户名或密码错误！</div>\r\n                // //         // });\r\n                // //     }\r\n                // // });\r\n\r\n                Ajax(`platform/login`, {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(param)\r\n                }).then(rs => {\r\n                    if(rs.code === 0) {\r\n                        localStorage.setItem('user', JSON.stringify(rs.data));\r\n                        localStorage.setItem('token', rs.token);\r\n                        dispatch({\r\n                            type: \"login\",\r\n                            user: rs.data\r\n                        });\r\n                        history.push('/');\r\n                    } else {\r\n                        Message.warning({\r\n                            msg: <div>用户名或密码错误！</div>\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }, dispatch)\r\n) \r\nclass LoginPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: '',\r\n            password: ''\r\n        };\r\n    }\r\n    componentDidMount() {\r\n    }\r\n    handleChange = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    };\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n        if (this.state.userName == '' || this.state.password == '') {\r\n            Message.warning({\r\n                msg: <div>用户名或密码错误！</div>\r\n            });\r\n            return;\r\n        }\r\n        this.props.login(this.state);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"login\" onSubmit={this.submit}>\r\n                <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n                    <div style={{ padding: '10px' }}>\r\n                        <Input type=\"text\" name=\"userName\" value={this.state.userName} onChange={this.handleChange} placeholder=\"请输入admin\" />\r\n                    </div>\r\n                    <div style={{ padding: '10px' }}>\r\n                        <Input type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} placeholder=\"请输入admin\" />\r\n                    </div>\r\n                    <div style={{ padding: '10px' }}>\r\n                        <Button type=\"submit\">Login In</Button>\r\n                    </div>\r\n                </Form>\r\n            </div>\r\n        );\r\n    }\r\n};\r\nexport default LoginPage;","const createHistory = require(\"history\").createHashHistory;\r\nconst history = createHistory();\r\nexport default history;","const Ajax = function (url, option = {}) {\r\n    return fetch(url, {\r\n        // body: JSON.stringify(data), // must match 'Content-Type' header\r\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n        //credentials: 'same-origin', // include, same-origin, *omit\r\n        headers: {\r\n            //'user-agent': 'Mozilla/4.0 MDN Example',\r\n            'content-type': 'application/json',\r\n            'Authorization': ('Bearer ' + localStorage.getItem('token')) || ''\r\n        },\r\n        method: 'GET', // *GET, POST, PUT, DELETE, etc.\r\n        //mode: 'cors', // no-cors, cors, *same-origin\r\n        //redirect: 'follow', // manual, *follow, error\r\n        //referrer: 'no-referrer', // *client, no-referrer\r\n        ...option\r\n    }).then(response => response.json());\r\n}\r\nexport default Ajax;\r\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}
