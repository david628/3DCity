(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[13],{288:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var i=n(60),a=n(56),o=n.n(a),r=n(115),s=n(10),c=n(11),d=n(19),u=n(20),h=n(0),l=n.n(h),f=(n(345),n(295)),g=n(142),p=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).hanldeResize=function(e){e.preventDefault(),clearTimeout(i.timeout),i.timeout=setTimeout((function(){i.resize(),clearTimeout(i.timeout)}),500)},i.state={config:{},components:[],scale:1},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.hanldeResize,!1);var e=this.props.location.pathname.split("/");this.screenId=e[e.length-1],this.req_getScreen()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.hanldeResize)}},{key:"resize",value:function(){var e,t=this.state.config,n=t.width,i=t.height,a=t.display;console.log(this.editParentNode.offsetWidth,this.editParentNode.offsetHeight);var o=this.editParentNode.offsetWidth/n,r=this.editParentNode.offsetHeight/i,s=parseInt(a,10);1===s?e=o:2===s?e=r:3===s?e=o<r?o:r:4===s&&(e="".concat(o,",").concat(r)),this.setState({scale:e})}},{key:"req_getScreen",value:function(){var e=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loadingVisible:!0}),e.next=3,Object(g.a)("screen/getScreen/".concat(this.screenId),{method:"GET"});case 3:n=e.sent,this.setState({loadingVisible:!1}),0===n.code?this.initScreen(n.data||{}):this.initScreen({});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)({width:1920,height:1028,backgroundColor:"radial-gradient(at center center, rgba(0, 37, 104, 0.8) 0%, rgb(0, 1, 3) 100%)",backgroundImage:"",display:4,space:20,grid:10,screenshot:""},e)}},{key:"initScreen",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.layer&&t.layer[0]?t.layer[0]:{components:[]},i=n.components,a=this.getConfig(t.config);a={_id:void 0===a._id?a.id:a._id,id:void 0===a._id?a.id:a._id,screenId:a.screenId,width:a.width,height:a.height,backgroundColor:a.backgroundColor,backgroundImage:a.backgroundImage,display:a.display,space:a.space,grid:a.grid,screenshot:a.screenshot};var o=[],r=[];i.forEach((function(t){var n=e.visualization.addChart(t.com,t);void 0===t.pId||null===t.pId?o.push(n):r.push(n)})),this.setState({config:a,components:[].concat(o,r)},(function(){e.resize()}))}},{key:"render",value:function(){var e=this,t=this.props.sprefix,n=this.state,i=n.config,a=n.components,o=n.scale;return l.a.createElement("div",{className:"".concat(t,"-screen"),ref:function(t){e.editParentNode=t}},l.a.createElement(f.a,{ref:function(t){e.visualization=t},config:i,data:a,scale:o,defaultMode:1}))}}]),n}(h.Component);p.defaultProps={sprefix:"dw"}},345:function(e,t,n){}}]);
//# sourceMappingURL=13.bb173c87.chunk.js.map