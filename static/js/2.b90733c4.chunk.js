(this["webpackJsonpfar-seer"]=this["webpackJsonpfar-seer"]||[]).push([[2],{167:function(e,a,t){"use strict";var n=t(329);t(604);a.a=n.b},191:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return S}));t(486);var n=t(567),c=t.n(n),i=(t(488),t(557)),l=t.n(i),o=(t(190),t(175)),r=t.n(o),s=(t(341),t(344)),d=t.n(s),u=t(19),m=t(20),h=t(21),p=t(22),f=t(0),g=t.n(f),v=t(791),y=t(792),E=t(793),b=t(794),C=t(795),N=t(796),L=t(797),k=t(798),S=(t(343),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(u.a)(this,t),(n=a.call(this,e)).handleClick=function(e){var a={key:(new Date).getTime(),name:e.key,title:e.key,isLeaf:!1};if(n.props.onChange)n.props.onChange(a);else{var t=n.state.data.slice();t.unshift(a),n.setState({data:t,selectedKeys:[a.key]})}},n.handleDel=function(e){e.preventDefault(),n.props.onDel&&n.props.onDel(n.state.selectedKeys)};var c=e.selectedKeys||e.defaultSelectedKeys,i=e.data||e.defaultData;return n.state={selectedKeys:c,data:i},n.menu=g.a.createElement(d.a,{onClick:n.handleClick},g.a.createElement(d.a.Item,{key:"BuildingLayer",icon:t.getIcon("BuildingLayer")},t.getTitle("BuildingLayer")),g.a.createElement(d.a.Item,{key:"LineLayer",icon:t.getIcon("LineLayer")},t.getTitle("LineLayer")),g.a.createElement(d.a.Item,{key:"PolygonLayer",icon:t.getIcon("PolygonLayer")},t.getTitle("PolygonLayer")),g.a.createElement(d.a.Item,{key:"PointLayer",icon:t.getIcon("PointLayer")},t.getTitle("PointLayer")),g.a.createElement(d.a.Item,{key:"LabelLayer",icon:t.getIcon("LabelLayer")},t.getTitle("LabelLayer")),g.a.createElement(d.a.Item,{key:"ScanLayer",icon:t.getIcon("ScanLayer")},t.getTitle("ScanLayer"))),n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"selectedKeys"in e&&e.selectedKeys!==this.state.selectedKeys&&this.setState({selectedKeys:e.selectedKeys}),"data"in e&&e.data!==this.state.data&&this.setState({data:e.data})}},{key:"render",value:function(){var e=this.props.sprefix;return g.a.createElement("div",{className:"".concat(e,"-editor-sider-main")},g.a.createElement("div",{className:"".concat(e,"-editor-sider-header")},g.a.createElement("div",{className:"".concat(e,"-editor-sider-label")},"\u56fe\u5c42"),g.a.createElement("div",{className:"".concat(e,"-editor-sider-tools")},g.a.createElement("span",null,g.a.createElement(l.a,{overlay:this.menu,trigger:["click"],overlayClassName:"cls-custom-dropdown"},g.a.createElement(r.a,{icon:g.a.createElement(v.a,null),title:"\u6dfb\u52a0",size:"small"}))),g.a.createElement("span",null,g.a.createElement(r.a,{icon:g.a.createElement(y.a,null),size:"small",title:"\u5220\u9664",onClick:this.handleDel})))),g.a.createElement("div",{className:"".concat(e,"-editor-sider-content")},g.a.createElement(c.a,Object.assign({},this.props,{showIcon:!0,selectedKeys:this.state.selectedKeys,treeData:this.state.data}))))}}],[{key:"getTitle",value:function(e){return"Map"===e?"Map":"BuildingLayer"===e?"Building\u5c42":"LineLayer"===e?"\u8f68\u8ff9\u7ebf\u5c42":"PolygonLayer"===e?"Polygon\u5c42":"PointLayer"===e?"\u7c92\u5b50\u5c42":"LabelLayer"===e?"\u6587\u5b57\u6807\u7b7e\u5c42":"ScanLayer"===e?"Scan\u5c42":void 0}},{key:"getIcon",value:function(e){return"Map"===e?g.a.createElement(E.a,null):"BuildingLayer"===e?g.a.createElement(b.a,null):"LineLayer"===e?g.a.createElement(C.a,null):"PolygonLayer"===e?g.a.createElement(N.a,null):"PointLayer"===e?g.a.createElement(L.a,null):"LabelLayer"===e?g.a.createElement(k.a,null):"ScanLayer"===e?g.a.createElement(E.a,null):void 0}}]),t}(f.Component));S.defaultProps={sprefix:"cls"}},196:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));t(600);var n=t(605),c=t.n(n),i=(t(602),t(611)),l=t.n(i),o=t(84),r=t(101),s=t(19),d=t(20),u=t(21),m=t(22),h=t(0),p=t.n(h),f=t(167),g=(t(380),function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).handleClick=function(e){return function(a){a.preventDefault(),n.click(e)}},n.handleAdd=function(e){var a=n.state.isModalVisible;n.setState({isModalVisible:!a})},n.handleSumbit=function(e){var a=n.state,t=a.menus,c=a.mapName,i=a.mapUrl;if(""!==c&&""!==i){var l={name:c,label:c,img:"/images/map/ellipsoid.png",url:i};t.unshift(l),n.setState({isModalVisible:!1,menus:t})}},n.handleCancel=function(e){n.setState({isModalVisible:!1})},n.handleChange=function(e){n.setState(Object(r.a)({},e.target.name,e.target.value))};var c=e.config||e.defaultConfig;return n.state={isModalVisible:!1,mapName:"",mapUrl:"",config:c,menus:[{label:"ArcGIS",img:"images/map/stamenToner.png",url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"},{label:"\u9ad8\u5fb7\u5730\u56fe",img:"images/map/esriWorldStreetMap.png",url:"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"},{label:"OSM",img:"images/map/openStreetMap.png",url:"http://{a}.tile.openstreetmap.org/{z}/{x}/{y}.png"}]},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"click",value:function(e){var a=this.state.config,t=Object(o.a)(Object(o.a)({},a),{},{url:e.url,color:e.color});this.setState({config:t}),this.props.onChange&&this.props.onChange(t)}},{key:"render",value:function(){var e=this,a=this.props.sprefix,t=this.state,n=t.menus,i=t.isModalVisible,o=t.config,r=t.mapName,s=t.mapUrl,d=n.map((function(t,n){var c=["".concat(a,"-map-panel-item")];return o.url===t.url&&c.push("".concat(a,"-map-panel-item-active")),p.a.createElement("div",{key:n,className:c.join(" "),onClick:e.handleClick(t)},p.a.createElement("div",{className:"".concat(a,"-map-panel-card")},p.a.createElement("img",{src:t.img,alt:"Loading..."})),p.a.createElement("div",{className:"".concat(a,"-map-panel-label")},t.label))}));return p.a.createElement("div",{className:"".concat(a,"-map-panel")},p.a.createElement("div",{className:"".concat(a,"-editor-box")},p.a.createElement("div",{className:"".concat(a,"-editor-box-header")},"\u5730\u56fe\u5e95\u56fe"),p.a.createElement("div",{className:"".concat(a,"-editor-box-content")},p.a.createElement("div",{className:"".concat(a,"-map-panel-list")},p.a.createElement("div",{className:"".concat(a,"-map-panel-item"),onClick:this.handleAdd},p.a.createElement("div",{className:"".concat(a,"-map-panel-card ").concat(a,"-map-panel-card-add")},"+"),p.a.createElement("div",{className:"".concat(a,"-map-panel-label")},"\u81ea\u5b9a\u4e49")),d),p.a.createElement("div",{className:"".concat(a,"-editor-label-group")},p.a.createElement("span",{className:"".concat(a,"-editor-label")},"\u6ee4\u955c\u989c\u8272"),p.a.createElement("div",{className:"".concat(a,"-editor-input")},p.a.createElement(f.a,{defaultValue:o.color,onChange:function(a,t){e.click({url:o.url,color:t.value})}}))))),p.a.createElement(c.a,{wrapClassName:"".concat(a,"-editor-dialog"),title:"\u6dfb\u52a0\u7b2c\u4e09\u65b9\u5e95\u56fe",visible:i,centered:!0,onOk:this.handleSumbit,onCancel:this.handleCancel},p.a.createElement("div",{style:{padding:"0 20px"}},p.a.createElement("div",{className:"".concat(a,"-form")},p.a.createElement("div",{className:"".concat(a,"-form-label-group")},p.a.createElement("span",{className:"".concat(a,"-form-label")},"\u5e95\u56fe\u540d\u79f0"),p.a.createElement("div",{className:"".concat(a,"-form-input")},p.a.createElement(l.a,{name:"mapName",value:r,onChange:this.handleChange}))),p.a.createElement("div",{className:"".concat(a,"-form-label-group")},p.a.createElement("span",{className:"".concat(a,"-form-label")},"\u5e95\u56feURL"),p.a.createElement("div",{className:"".concat(a,"-form-input")},p.a.createElement(l.a,{name:"mapUrl",value:s,onChange:this.handleChange})))))))}}]),t}(h.Component));g.defaultProps={sprefix:"cls"}},198:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));t(298);var n=t(300),c=t.n(n),i=(t(176),t(177)),l=t.n(i),o=t(19),r=t(20),s=t(21),d=t(22),u=t(0),m=t.n(u),h=t(299),p=t(167),f=(t(384),function(e){Object(s.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(o.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({color:"#ffc627",img:"",opacity:1,direction:!0,effect:!0},c),n.state={config:c},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return m.a.createElement("div",{className:"".concat(e,"-polygon-panel")},m.a.createElement("div",{className:"".concat(e,"-editor-box")},m.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),m.a.createElement("div",{className:"".concat(e,"-editor-box-content")},m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8d34\u56fe"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.img,onChange:this.handleChange("img")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(p.a,{value:a.color,onChange:this.handleChange("color")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.01,value:a.opacity,onChange:this.handleChange("opacity")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u6d41\u52a8\u65b9\u5411"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(c.a,{checked:a.direction,onChange:this.handleChange("direction")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7279\u6548"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(c.a,{checked:a.effect,onChange:this.handleChange("effect")}))))))}}]),t}(u.Component));f.defaultProps={sprefix:"cls"}},199:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return v}));t(298);var n=t(300),c=t.n(n),i=(t(200),t(201)),l=t.n(i),o=(t(176),t(177)),r=t.n(o),s=t(19),d=t(20),u=t(21),m=t(22),h=t(0),p=t.n(h),f=t(299),g=t(167),v=(t(386),function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({height:100,topOpacity:1,sideOpacity:1,topColor:"#4d7384",sideColor:"#66a3ee",effect:!1},c),n.state={config:c},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return p.a.createElement("div",{className:"".concat(e,"-polygon-panel")},p.a.createElement("div",{className:"".concat(e,"-editor-box")},p.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),p.a.createElement("div",{className:"".concat(e,"-editor-box-content")},p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u9876\u8d34\u56fe"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(f.a,{value:a.topImg,onChange:this.handleChange("topImg")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u9876\u989c\u8272"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(g.a,{value:a.topColor,onChange:this.handleChange("topColor")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u9876\u900f\u660e\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(r.a,{min:0,max:1,step:.01,value:a.topOpacity,onChange:this.handleChange("topOpacity")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8fb9\u8d34\u56fe"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(f.a,{value:a.sideImg,onChange:this.handleChange("sideImg")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8fb9\u989c\u8272"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(g.a,{value:a.sideColor,onChange:this.handleChange("sideColor")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8fb9\u900f\u660e\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(r.a,{min:0,max:1,step:.01,value:a.sideOpacity,onChange:this.handleChange("sideOpacity")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u62c9\u4f38\u9ad8\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(l.a,{min:0,max:999999,step:1,value:a.height,onChange:this.handleChange("height")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7279\u6548"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(c.a,{checked:a.effect,onChange:this.handleChange("effect")}))))))}}]),t}(h.Component));v.defaultProps={sprefix:"cls"}},202:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return g}));t(298);var n=t(300),c=t.n(n),i=(t(200),t(201)),l=t.n(i),o=(t(176),t(177)),r=t.n(o),s=t(19),d=t(20),u=t(21),m=t(22),h=t(0),p=t.n(h),f=t(167),g=(t(387),function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var n;Object(s.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({height:100,opacity:.5,color:"#DD3217",outlineColor:"#ffa108",outlineOpacity:1,effect:!1},c),n.state={config:c},n}return Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return p.a.createElement("div",{className:"".concat(e,"-polygon-panel")},p.a.createElement("div",{className:"".concat(e,"-editor-box")},p.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),p.a.createElement("div",{className:"".concat(e,"-editor-box-content")},p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u989c\u8272"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(f.a,{value:a.color,onChange:this.handleChange("color")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u900f\u660e\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(r.a,{min:0,max:1,step:.01,value:a.opacity,onChange:this.handleChange("opacity")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8fb9\u6846\u989c\u8272"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(f.a,{value:a.outlineColor,onChange:this.handleChange("outlineColor")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u8fb9\u6846\u900f\u660e\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(r.a,{min:0,max:1,step:.01,value:a.outlineOpacity,onChange:this.handleChange("outlineOpacity")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u9ad8\u5ea6"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(l.a,{min:0,max:999999,step:1,value:a.height,onChange:this.handleChange("height")}))),p.a.createElement("div",{className:"".concat(e,"-editor-label-group")},p.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7279\u6548"),p.a.createElement("div",{className:"".concat(e,"-editor-input")},p.a.createElement(c.a,{checked:a.effect,onChange:this.handleChange("effect")}))))))}}]),t}(h.Component));g.defaultProps={sprefix:"cls"}},203:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));t(200);var n=t(201),c=t.n(n),i=(t(176),t(177)),l=t.n(i),o=t(19),r=t(20),s=t(21),d=t(22),u=t(0),m=t.n(u),h=t(167),p=(t(388),function(e){Object(s.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(o.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({fontColor:"#ffffff",fontSize:12,color:"rgba(10,18,51,0.8)",opacity:1,lineColor:"#ffffff",lineOpacity:1},c),n.state={config:c},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return m.a.createElement("div",{className:"".concat(e,"-polygon-panel")},m.a.createElement("div",{className:"".concat(e,"-editor-box")},m.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),m.a.createElement("div",{className:"".concat(e,"-editor-box-content")},m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.color,onChange:this.handleChange("color")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.01,value:a.opacity,onChange:this.handleChange("opacity")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u5b57\u4f53\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.fontColor,onChange:this.handleChange("fontColor")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u5b57\u4f53\u5927\u5c0f"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(c.a,{min:0,max:999999,step:1,value:a.fontSize,onChange:this.handleChange("fontSize")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7ebf\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.lineColor,onChange:this.handleChange("lineColor")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7ebf\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.01,value:a.lineOpacity,onChange:this.handleChange("lineOpacity")}))))))}}]),t}(u.Component));p.defaultProps={sprefix:"cls"}},204:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return f}));t(200);var n=t(201),c=t.n(n),i=(t(176),t(177)),l=t.n(i),o=t(19),r=t(20),s=t(21),d=t(22),u=t(0),m=t.n(u),h=t(299),p=t(167),f=(t(389),function(e){Object(s.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(o.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({img:"images/point/1.png",color:"#00ff00",opacity:1,size:300,lineColor:"#ffffff",lineOpacity:1},c),n.state={config:c},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return m.a.createElement("div",{className:"".concat(e,"-polygon-panel")},m.a.createElement("div",{className:"".concat(e,"-editor-box")},m.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),m.a.createElement("div",{className:"".concat(e,"-editor-box-content")},m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7c92\u5b50\u8d34\u56fe"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.img,onChange:this.handleChange("img")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(p.a,{value:a.color,onChange:this.handleChange("color")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.01,value:a.opacity,onChange:this.handleChange("opacity")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u5927\u5c0f"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(c.a,{min:0,max:999999,step:1,value:a.size,onChange:this.handleChange("size")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7ebf\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(p.a,{value:a.lineColor,onChange:this.handleChange("lineColor")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u7ebf\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.01,value:a.lineOpacity,onChange:this.handleChange("lineOpacity")}))))))}}]),t}(u.Component));f.defaultProps={sprefix:"cls"}},205:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));t(200);var n=t(201),c=t.n(n),i=(t(176),t(177)),l=t.n(i),o=t(19),r=t(20),s=t(21),d=t(22),u=t(0),m=t.n(u),h=t(167),p=(t(390),function(e){Object(s.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(o.a)(this,t),(n=a.call(this,e)).handleChange=function(e){return function(a,t){n.props.onChange&&n.props.onChange(a,t,e)}};var c=e.config||e.defaultConfig;return c=Object.assign({height:0,color:"#FF9400",opacity:1,speed:.01},c),n.state={config:c},n}return Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"config"in e&&e.config!==this.state.config&&this.setState({config:e.config})}},{key:"render",value:function(){var e=this.props.sprefix,a=this.state.config;return m.a.createElement("div",{className:"".concat(e,"-polygon-panel")},m.a.createElement("div",{className:"".concat(e,"-editor-box")},m.a.createElement("div",{className:"".concat(e,"-editor-box-header")},"\u57fa\u672c\u4fe1\u606f"),m.a.createElement("div",{className:"".concat(e,"-editor-box-content")},m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u989c\u8272"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(h.a,{value:a.color,onChange:this.handleChange("color")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u900f\u660e\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(l.a,{min:0,max:1,step:.1,value:a.opacity,onChange:this.handleChange("opacity")}))),m.a.createElement("div",{className:"".concat(e,"-editor-label-group")},m.a.createElement("span",{className:"".concat(e,"-editor-label")},"\u901f\u5ea6"),m.a.createElement("div",{className:"".concat(e,"-editor-input")},m.a.createElement(c.a,{min:0,max:1,step:.01,value:a.speed,onChange:this.handleChange("speed")}))))))}}]),t}(u.Component));p.defaultProps={sprefix:"cls"}},226:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var n=t(84),c=t(19),i=t(20),l=t(21),o=t(22),r=t(0),s=t.n(r),d=t(125),u=(t(737),function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var i;Object(c.a)(this,t),(i=a.call(this,e)).handleChange=function(e){var a=i.editor.getValue();i.props.onChange&&i.props.onChange(a,Object(n.a)(Object(n.a)({},i.props),{},{value:a}))},i.param={language:"json",theme:"vs-dark",minimap:{enabled:!1},automaticLayout:!0};var l=e.defaultValue||"";"value"in e&&(l=e.value||"");var o=e.param||{};return i.param=Object(n.a)(Object(n.a)({},i.param),o),i.state={value:l},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.editor||(this.editor=d.editor.create(this.editorDom,this.param),this.setValue(this.state.value),this._subscription=this.editor.onDidChangeModelContent(this.handleChange))}},{key:"componentWillReceiveProps",value:function(e){"value"in e&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"shouldComponentUpdate",value:function(e,a){var t=e.defaultValue||"";return"value"in e&&(t=e.value||""),t!==this.state.value}},{key:"componentDidUpdate",value:function(e){this.setValue(this.state.value)}},{key:"componentWillUnmount",value:function(){this.destoryMonaco()}},{key:"setValue",value:function(e){this.editor&&this.editor.setValue(e)}},{key:"destoryMonaco",value:function(){if(this.editor){this.editor.dispose();var e=this.editor.getModel();e&&e.dispose()}this._subscription&&this._subscription.dispose()}},{key:"render",value:function(){var e=this,a=this.props,t=a.sprefix,n=a.style;return s.a.createElement("div",{className:"".concat(t,"-editor-wrap")},s.a.createElement("div",{className:"".concat(t,"-editor"),ref:function(a){return e.editorDom=a},style:n}))}}]),t}(r.Component));u.defaultProps={sprefix:"cls",onChange:function(){}};var m=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var i;Object(c.a)(this,t),(i=a.call(this,e)).handleChange=function(e){e.preventDefault();var a=e.target.files[0];if(void 0!==a){var t=new FileReader;t.readAsText(a),t.onload=function(e){var t=JSON.parse(e.target.result);i.setState({path:a.name,value:t}),i.props.onChange&&i.props.onChange(t,Object(n.a)(Object(n.a)({},i.props),{},{value:t}))}}},i.handleClick=function(e){};var l=e.value||e.defaultValue;return i.state={value:l,path:""},i.getJSON(l),i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){"value"in e&&e.value!==this.state.value&&this.getJSON(e.value)}},{key:"getJSON",value:function(e){var a=this;if(void 0!==e&&null!==e||(e=""),"string"===typeof e){var t=e;t!==this.state.path&&fetch(t).then((function(e){return e.json()})).then((function(e){a.setState({value:e,path:t})}))}else this.setState({value:e,path:""})}},{key:"onChange",value:function(e,a){"value"in this.props||this.setState({value:e}),this.props.onChange&&this.props.onChange(e,Object(n.a)(Object(n.a)({},this.props),{},{value:e}))}},{key:"render",value:function(){var e,a=this,t=this.props.sprefix;"".concat(t,"-image-wrap");return"string"!==this.state.value&&(e=JSON.stringify(this.state.value,null,2)),s.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",padding:"10px"}},s.a.createElement("div",{style:{position:"relative",border:"1px solid #000",borderRadius:"2px",marginBottom:"10px"}},s.a.createElement("div",{title:"",style:{padding:"4px 15px"}},s.a.createElement("span",{style:{padding:"10px"}},this.state.path)),s.a.createElement("input",{ref:function(e){return a.fileInput=e},type:"file",className:"".concat(t,"-image-input"),accept:"application/json",onChange:this.handleChange,style:{opacity:0,width:"100%",height:"100%",position:"absolute",top:0,left:0,cursor:"pointer"}})),s.a.createElement("div",{style:{width:"100%",height:"600px"}},s.a.createElement(u,{value:e,onChange:function(e,t){a.props.onChange&&a.props.onChange(e,Object(n.a)(Object(n.a)({},a.props),{},{value:e}))}})))}}]),t}(r.Component);m.defaultProps={sprefix:"cls"}},280:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return P}));t(190);var n=t(175),c=t.n(n),i=(t(483),t(741)),l=t.n(i),o=t(24),r=t(62),s=t.n(r),d=t(485),u=t(19),m=t(20),h=t(21),p=t(22),f=t(0),g=t.n(f),v=t(191),y=t(196),E=t(198),b=t(199),C=t(202),N=t(203),L=t(204),k=t(205),S=t(226),x=t(84),O=(t(738),function(){function e(a){if(Object(u.a)(this,e),this.prix="dwrui",this.template='\n            <input class="'.concat(this.prix,'-mapSelector-hidden" type="hidden"/>\n            <div class="').concat(this.prix,'-mapSelector">\n                <span class="').concat(this.prix,'-mapSelector-inner">\n                    <i class="').concat(this.prix,'-icon"></i><span class="').concat(this.prix,'-mapSelector-text">\u9009\u62e9\u81ea\u5b9a\u4e49\u57ce\u5e02</span>\n                </span>\n            </div>\n        '),this.width=1e3,this.height=1e3,this.dx=80,this.dy=160,this.center=[22.496991,113.924008],this.zoom=13,this.url="https://nominatim.openstreetmap.org/search?format=json&q={s}",this.placeholder="\u8bf7\u8f93\u5165\u5730\u70b9",Object.assign(this,a),this.el=this.el.get?this.el.get(0):"string"===typeof this.el?document.getElementById(this.el):this.el,this.el.innerHTML=this.template,this.hidden=this.el.querySelector(".".concat(this.prix,"-mapSelector-hidden")),this.hidden.name=this.name,this.handleClick=this.handleClick.bind(this),this.el.addEventListener("click",this.handleClick,!1),""===this.value||void 0===this.value||null===this.value)this.latLng={lat:this.center[0],lng:this.center[1]},this.setValue("".concat(this.latLng.lng,",").concat(this.latLng.lat)),this.showMap();else{var t=this.value.split(",");isNaN(t[0]||t[1])?this.latLng={lat:this.center[0],lng:this.center[1]}:this.latLng={lat:t[1],lng:t[0]},this.setValue("".concat(this.latLng.lng,",").concat(this.latLng.lat))}}return Object(m.a)(e,[{key:"initSearchTools",value:function(){var e=this,a=new window.L.Control.Search({url:this.url,jsonParam:"json_callback",propertyName:"display_name",propertyLoc:["lat","lon"],textPlaceholder:this.placeholder,marker:!1,autoCollapse:!0,autoType:!1,minLength:2,tipAutoSubmit:!0,moveToLocation:function(a){e.map.flyTo([a.lat,a.lng]),e.renderRect([a.lat,a.lng])}});this.map.addControl(a)}},{key:"setMarker",value:function(e){var a=window.L;this.marker&&this.marker.remove(),this.marker=a.marker(e).addTo(this.map)}},{key:"renderRect",value:function(e){this.rect&&this.rect.remove();var a=window.L,t=this.map.latLngToContainerPoint(e),n=a.point(t.x-this.dx/2,t.y-this.dy/2),c=a.point(t.x+this.dx/2,t.y+this.dy/2);this.rect=a.rectangle([this.map.containerPointToLatLng(n),this.map.containerPointToLatLng(c)]).addTo(this.map),this.rect.enableEdit()}},{key:"setValue",value:function(e){this.hidden.value=this.value=e}},{key:"handleClick",value:function(e){this.showMap()}},{key:"show",value:function(){this.dialog&&(this.dialog.style.display="block")}},{key:"hide",value:function(){this.dialog&&(this.dialog.style.display="none")}},{key:"onChange",value:function(){}},{key:"showMap",value:function(){var e=this;if(!this.dialog){this.dialog=document.createElement("div"),this.dialog.className="".concat(this.prix,"-mapSelector-dialog"),this.dialog.innerHTML='\n                <div class="'.concat(this.prix,'-mapSelector-dialog-inner">\n                    <div class="').concat(this.prix,'-mapSelector-dialog-header">\n                        <div class="').concat(this.prix,'-mapSelector-dialog-close"></div>\n                    </div>\n                    <div class="').concat(this.prix,'-mapSelector-dialog-center">\n                        <div style="text-align: center;overflow: hidden;">\n                            <div class="').concat(this.prix,'-mapSelector-map" style="width: 936px;height: 500px;margin: 0 auto;"></div>\n                            <div style="line-height: 90px;">\n                                <a class="').concat(this.prix,'-mapSelector-submit" href="javascript:;" style="margin-right: 3px;background: #3399FF;border-radius: 2px;border: 1px solid #3399FF;color: #fff;padding: 6px 22px;">\u786e\u5b9a</a>\n                                <a class="').concat(this.prix,'-mapSelector-close" href="javascript:;" style="margin-left: 3px;border-radius: 2px;border: 1px solid #3399FF;color: #3399FF;padding: 6px 22px;">\u53d6\u6d88</a>    \n                            </div>\n                        </div>\n                    </div>\n                    <div class="').concat(this.prix,'-mapSelector-dialog-footer"></div>\n                </div>\n            '),document.body.appendChild(this.dialog);var a=this.dialog.querySelector(".".concat(this.prix,"-mapSelector-dialog-inner"));this.dialog.onclick=function(t){a.contains(t.target)||e.hide()},this.dialog.querySelector(".".concat(this.prix,"-mapSelector-submit")).onclick=function(a){e.setValue("".concat(e.latLng.lng,",").concat(e.latLng.lat)),e.onChange(e.value),e.hide()},this.dialog.querySelector(".".concat(this.prix,"-mapSelector-close")).onclick=function(a){e.hide()}}if(this.show(),!this.map){var t=window.L;this.map=t.map(this.dialog.querySelector(".".concat(this.prix,"-mapSelector-map")),{editable:!0}),this.map.setView(this.latLng,this.zoom),t.tileLayer("http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}").addTo(this.map),this.initSearchTools(),this.renderRect(this.latLng),this.map.fitBounds(this.rect.getBounds()),this.setMarker(this.latLng),this.map.on("moveend",(function(a){e.updateLocal()})),this.map.on("mouseup",(function(a){e.updateLocal()}))}}},{key:"updateLocal",value:function(){var e=window.L,a=this.rect.getBounds(),t=a._northEast,n=a._southWest,c=this.map.latLngToContainerPoint([t.lat,t.lng]),i=this.map.latLngToContainerPoint([n.lat,n.lng]),l=e.point(i.x+(c.x-i.x)/2,i.y+(c.y-i.y)/2);this.latLng=this.map.containerPointToLatLng(l),this.setMarker(this.latLng)}}]),e}()),j=(t(739),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(e){var n;Object(u.a)(this,t),(n=a.call(this,e)).handleChange=function(e){n.props.onChange&&n.props.onChange(e,Object(x.a)(Object(x.a)({},n.props),{},{value:e}))};var c=e.defaultValue||"";return"value"in e&&(c=e.value||""),n.state={value:c},n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.mapSelector||(this.mapSelector=new O({el:this.dom,onChange:this.handleChange}))}},{key:"componentWillReceiveProps",value:function(e){"value"in e&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"shouldComponentUpdate",value:function(e,a){var t=e.defaultValue||"";return"value"in e&&(t=e.value||""),t!==this.state.value}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){}},{key:"setValue",value:function(e){}},{key:"render",value:function(){var e=this,a=this.props,t=a.sprefix;a.style;return g.a.createElement("span",{className:"".concat(t,"-map-select")},g.a.createElement("span",{className:"".concat(t,"-map-select-inner"),ref:function(a){return e.dom=a}}))}}]),t}(f.Component));j.defaultProps={sprefix:"cls",onChange:function(){}};t(434);var P=function(e){Object(h.a)(n,e);var a=Object(p.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=a.call(this,e)).loaderMap=Object(d.a)(s.a.mark((function e(){var a,n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.view){e.next=9;break}return e.next=3,t.e(7).then(t.bind(null,788));case 3:for(i in a=(a=e.sent).default,c.view=new a({el:c.dom}),c.add("Map",{url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"}),n={BuildingLayer:{height:100,topImg:"",topColor:"#4d7384",topOpacity:1,sideImg:"",sideColor:"#66a3ee",sideOpacity:1,effect:!1,dataSource:"data/building.json"},LabelLayer:{fontColor:"#ffffff",fontSize:12,color:"rgba(10,18,51,0.8)",opacity:1,lineColor:"#ffffff",dataSource:"data/point.json"},PointLayer:{img:"images/point/1.png",color:"#00ff00",opacity:1,size:300,lineColor:"#ffffff",lineOpacity:1,dataSource:"data/point.json"},ScanLayer:{height:0,color:"#FF9400",opacity:1,speed:.01,dataSource:"data/point.json"},LineLayer:{color:"#ffc627",img:"",opacity:1,direction:!0,effect:!0,dataSource:"data/road.json"}})c.add(i,n[i]);case 9:case"end":return e.stop()}}),e)}))),c.handleClickSiderMenu=function(e){c.add(e.name)},c.handleSelectSiderMenu=function(e){c.select(e)},c.handleClick=function(e){e.preventDefault()},c.handleButton=function(e){return function(a){a.preventDefault(),c.goToLonLat(e.split(","))}},c.handleSetStyle=function(e,a,t){var n=c.state,i=n.selectedKeys,l=n.editor.entities[i[0]];l[t]=null===a||void 0===a?e:null===e||void 0===e?a.value:e,c.setState({config:l}),c.currentLayers[l.resource_id].setStyle(l)},c.handleSetMap=function(e){var a=c.state,t=a.selectedKeys,n=a.editor.entities[t[0]];n.url=e.url,n.color=e.color,c.setState({config:e}),c.view.setMap(e)},c.handlePublish=function(e){},c.handleSetDataSource=function(e){var a=c.state.config;c.currentLayers[a.resource_id]&&c.currentLayers[a.resource_id].setData&&(a.dataSource="string"===typeof e?JSON.parse(e):e,c.currentLayers[a.resource_id].setData(a.dataSource))},c.handleTabChange=function(e){},c.handleDel=function(e){if(e){for(var a=c.state,t=a.treeData,n=a.editor,i=t.slice(),l=[],o=0;o<e.length;o++){if("Map"===n.entities[e[o]].__type)return;c.currentLayers[e[o]].clear(),delete c.currentLayers[e[o]];for(var r=0;r<i.length;r++)i[r].key===e[o]&&i.splice(r,1)}i.length>0&&l.push(i[0].key),c.select(l),c.setState({treeData:i,selectedKeys:l})}},c.currentLayers={},c.state={treeData:[],selectedKeys:[],type:"",editor:{entities:{}}},c}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.loaderMap()}},{key:"componentWillUnmount",value:function(){this.view&&this.view.destory()}},{key:"deepCopy",value:function(e,a){for(var t in a)"[object Object]"===Object.prototype.toString.call(a[t])?e[t]=this.deepCopy({},a[t]):"[object Array]"===Object.prototype.toString.call(a[t])?e[t]=this.deepCopy([],a[t]):e[t]=a[t];return e}},{key:"add",value:function(e,a,n){var c=this,i=e,l=this.state,o=l.treeData,r=l.editor;if(a){var s=o.slice(),d=(new Date).getTime();a.resource_id=d;var u={key:d,name:i,icon:v.default.getIcon(i),title:v.default.getTitle(i)};s.unshift(u),u.data=a,a.__type=i,r.entities[a.resource_id]=a,this.setState({treeData:s}),n||(this.selectLayer(a.resource_id),this.showPanel(i),this.addLayer(i,a))}else t(740)("./".concat(i,"Panel/config")).then((function(e){var t=o.slice(),n={key:(new Date).getTime(),name:i,icon:v.default.getIcon(i),title:v.default.getTitle(i)};t.unshift(n),(a=c.deepCopy({},e.default)).resource_id=n.key,a.__type=i,n.data=a,r.entities[a.resource_id]=a,c.setState({treeData:t}),c.selectLayer(a.resource_id),c.showPanel(i),c.addLayer(i,a)}))}},{key:"select",value:function(e){if(e.length>0)for(var a=this.state.editor,t=0;t<e.length;t++){var n=a.entities[e[t]];this.selectLayer(n.resource_id),this.showPanel(n.__type)}}},{key:"showPanel",value:function(e){this.setState({type:e})}},{key:"selectLayer",value:function(e){this.setState({selectedKeys:[e],config:this.state.editor.entities[e]})}},{key:"addLayer",value:function(e,a){this.loadDataByLayer(e,a)}},{key:"loadDataByLayer",value:function(e,a){var t=this;this.loadDataSource(a,(function(n){a.dataSource;var c,i=Object(o.a)(a,["dataSource"]);"Map"===e?t.view.setMap(a):("BuildingLayer"===e?((c=t.view.addLayer({type:"BuildingLayer",style:i})).setData(n),t.currentLayers[a.resource_id]=c):"LineLayer"===e?((c=t.view.addLayer({type:"LineLayer"})).setData(n),t.currentLayers[a.resource_id]=c):"PolygonLayer"===e?((c=t.view.addLayer({type:"PolygonLayer",style:i})).setData(n),t.currentLayers[a.resource_id]=c):"LabelLayer"===e?((c=t.view.addLayer({type:"LabelLayer",style:i})).setData(n),t.currentLayers[a.resource_id]=c):"PointLayer"===e?((c=t.view.addLayer({type:"PointLayer",style:i})).setData(n),t.currentLayers[a.resource_id]=c):"ScanLayer"===e&&((c=t.view.addLayer({type:"ScanLayer",style:i})).setData(n),t.currentLayers[a.resource_id]=c),c.setData(n),t.currentLayers[a.resource_id]=c)}))}},{key:"goToLonLat",value:function(e){this.view.camera.flyTo({lonLat:e,height:5500})}},{key:"loadDataSource",value:function(e,a){"string"===typeof e.dataSource?fetch(e.dataSource,{cors:!0}).then((function(e){return e.json()})).then((function(e){a&&a(e)})):a&&a(e.dataSource)}},{key:"renderSettingPanel",value:function(){var e,a=this.props.sprefix,t=this.state,n=t.selectedKeys,c=t.type,i=t.config;return n.length<1?null:"Map"===c?g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(y.default,{config:i,onChange:this.handleSetMap})):(1===n.length?"LineLayer"===c?e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(E.default,{config:i,onChange:this.handleSetStyle})):"BuildingLayer"===c?e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(b.default,{config:i,onChange:this.handleSetStyle})):"PolygonLayer"===c?e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(C.default,{config:i,onChange:this.handleSetStyle})):"LabelLayer"===c?e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(N.default,{config:i,onChange:this.handleSetStyle})):"PointLayer"===c?e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(L.default,{config:i,onChange:this.handleSetStyle})):"ScanLayer"===c&&(e=g.a.createElement("div",{className:"".concat(a,"-editor-layout-scrollable")},g.a.createElement(k.default,{config:i,onChange:this.handleSetStyle}))):n.length,g.a.createElement(l.a,{onChange:this.handleTabChange,type:"card"},g.a.createElement(l.a.TabPane,{tab:"\u6837\u5f0f",key:"0"},e),g.a.createElement(l.a.TabPane,{tab:"\u6570\u636e",key:"1"},g.a.createElement(S.default,{value:i.dataSource,onChange:this.handleSetDataSource}))))}},{key:"render",value:function(){var e=this,a=this.props.sprefix;return g.a.createElement("div",{className:"".concat(a,"-editor-layout-main")},g.a.createElement("div",{className:"".concat(a,"-editor-layout-header")},g.a.createElement("div",{className:"".concat(a,"-editor-layout-header-inner")})),g.a.createElement("div",{className:"".concat(a,"-editor-layout-left")},g.a.createElement(v.default,{data:this.state.treeData,selectedKeys:this.state.selectedKeys,onChange:this.handleClickSiderMenu,onSelect:this.handleSelectSiderMenu,onDel:this.handleDel})),g.a.createElement("div",{className:"".concat(a,"-editor-layout-center")},g.a.createElement("div",{style:{position:"absolute",right:"5px",top:"5px",zIndex:"10"}},g.a.createElement(c.a,null,g.a.createElement(j,{onChange:function(a){e.goToLonLat(a.split(","))}})),g.a.createElement(c.a,{onClick:this.handleButton("113.924008,22.496991")},"\u6df1\u5733"),g.a.createElement(c.a,{onClick:this.handleButton("116.3970512151718,39.90549780269116")},"\u5317\u4eac"),g.a.createElement(c.a,{onClick:this.handleButton("120.20000,30.26667")},"\u676d\u5dde"),g.a.createElement(c.a,{onClick:this.handleButton("-95.712891,37.09024")},"\u7f8e\u56fd"),g.a.createElement(c.a,{onClick:this.handleButton("-3.435973,55.378051")},"\u82f1\u56fd")),g.a.createElement("div",{className:"".concat(a,"-globe")},g.a.createElement("div",{style:{position:"absolute",left:0,top:0,zIndex:10}}),g.a.createElement("div",{className:"".concat(a,"-globe-inner"),ref:function(a){return e.dom=a},style:{width:"100%",height:"100%"}}))),g.a.createElement("div",{className:"".concat(a,"-editor-layout-right")},this.renderSettingPanel()))}}]),n}(f.Component);P.defaultProps={sprefix:"cls"}},299:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(84),c=t(19),i=t(20),l=t(21),o=t(22),r=t(0),s=t.n(r),d=(t(627),function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).handleChange=function(e){e.preventDefault(),n.handleUploadFiles(e.target.files)},n.handleUploadFiles=function(e){for(var a=[],t=0;t<e.length;t++)a.push(this.handleUploadFile(e[t]));return Promise.all(a).then((function(e){return e}))},n.handleInputChange=function(e){e.preventDefault(),n.setState({imageUrl:e.target.value})},n.handleInputKeyPress=function(e){13===e.nativeEvent.which&&e.target.blur()},n.handleInputBlur=function(e){e.preventDefault();var a=n.state.imageUrl;n.onChange(a)},n.handleClick=function(e){e.preventDefault(),n.onChange(""),n.fileInput.value=""};var i=e.value||e.defaultValue;return n.state={value:i,imageUrl:i},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){if("value"in e){var a=e.value;a!==this.state.value&&this.setState({value:a,imageUrl:a})}}},{key:"componentDidUpdate",value:function(e){}},{key:"onChange",value:function(e,a){"value"in this.props||this.setState({value:e,imageUrl:e}),this.props.onChange&&this.props.onChange(e,Object(n.a)(Object(n.a)({},this.props),{},{value:e}))}},{key:"handleUploadFile",value:function(e){var a=this,t=new FileReader;t.readAsDataURL(e),t.onload=function(e){a.onChange(e.target.result)}}},{key:"getImageURL",value:function(e){return void 0!==e?"".concat(this.props.basePath,"/").concat(e):""}},{key:"render",value:function(){var e=this,a=this.props,t=a.sprefix,n=a.theme,c=a.fileTitle,i=a.placeholder,l=(a.name,a.disabled),o=["".concat(t,"-image-wrap")];return"dark"===n&&o.push("".concat(t,"-image-wrap-dark")),s.a.createElement("div",{className:o.join(" ")},s.a.createElement("div",{className:"".concat(t,"-image-url-wrap")},s.a.createElement("i",{className:"".concat(t,"-image-url-icon")},s.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"link",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s.a.createElement("path",{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}))),s.a.createElement("input",{className:"".concat(t,"-image-url"),placeholder:i,disabled:l,value:this.state.imageUrl||"",onKeyPress:this.handleInputKeyPress,onBlur:this.handleInputBlur,onChange:this.handleInputChange})),s.a.createElement("div",{className:"".concat(t,"-image-add")},s.a.createElement("span",{className:"".concat(t,"-image-label")},c),s.a.createElement("div",{className:"".concat(t,"-image-img"),style:{backgroundImage:"url(".concat(this.state.value,")")}}),s.a.createElement("input",{ref:function(a){return e.fileInput=a},type:"file",className:"".concat(t,"-image-input"),accept:"image/*",onChange:this.handleChange,disabled:l}),s.a.createElement("div",{className:"".concat(t,"-image-oper")},s.a.createElement("span",{className:"".concat(t,"-image-edit"),style:{display:"none"}},"\u270e"),s.a.createElement("span",{className:"".concat(t,"-image-delete"),onClick:this.handleClick},"\u2716"))))}}]),t}(r.Component));d.defaultProps={sprefix:"dwrui",placeholder:"Input...",fileTitle:"\u70b9\u51fb\u6216\u62d6\u62fd\u56fe\u7247",url:"",basePath:"",name:"",disabled:!1}},343:function(e,a,t){},380:function(e,a,t){},384:function(e,a,t){},386:function(e,a,t){},387:function(e,a,t){},388:function(e,a,t){},389:function(e,a,t){},390:function(e,a,t){},434:function(e,a,t){},604:function(e,a,t){},627:function(e,a,t){},737:function(e,a,t){},738:function(e,a,t){},739:function(e,a,t){},740:function(e,a,t){var n={"./BuildingLayerPanel/config":[269,9,14],"./DataSourcePanel/config":[270,7,15],"./LabelLayerPanel/config":[271,9,16],"./LineLayerPanel/config":[272,9,17],"./MapPanel/config":[273,9,18],"./PointLayerPanel/config":[274,9,19],"./PolygonLayerPanel/config":[275,9,20],"./ScanLayerPanel/config":[276,9,21]};function c(e){if(!t.o(n,e))return Promise.resolve().then((function(){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=n[e],c=a[0];return t.e(a[2]).then((function(){return t.t(c,a[1])}))}c.keys=function(){return Object.keys(n)},c.id=740,e.exports=c}}]);
//# sourceMappingURL=2.b90733c4.chunk.js.map